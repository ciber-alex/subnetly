<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Subnetly</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{ --neon:#00ff6a; --bg:#070a0f; --card:#0c1218; --muted:#8cffbf;
      --shadow: 0 0 12px rgba(0,255,106,0.25), inset 0 0 0 1px rgba(0,255,106,0.15); }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--neon);font:16px/1.4 ui-monospace,Consolas,Menlo,monospace;display:flex;flex-direction:column;min-height:100%}
    header{padding:24px 16px;text-align:center}
    h1{margin:0;font-size:clamp(28px,3.5vw,44px);text-shadow:0 0 8px rgba(0,255,106,.35)}
    .container{width:min(1100px,92vw);margin:0 auto 24px;display:grid;gap:16px;grid-template-columns:repeat(12,1fr)}
    .card{grid-column:span 12;background:var(--card);border-radius:16px;padding:16px;box-shadow:var(--shadow)}
    .card h2{margin:0 0 12px 0;font-size:18px;color:var(--muted)}
    .inputs{display:grid;gap:12px;grid-template-columns:repeat(12,1fr)}
    .field{grid-column:span 12;display:flex;flex-direction:column;gap:6px}
    label{font-size:13px;color:var(--muted)}
    input{background:#0b1117;color:var(--neon);border:1px solid rgba(0,255,106,.25);border-radius:10px;padding:10px 12px;outline:none;box-shadow:inset 0 0 0 1px rgba(0,255,106,.08)}
    input:focus{border-color:var(--neon);box-shadow:0 0 0 3px rgba(0,255,106,.15)}
    .hint{font-size:12px;color:#aaffcc}
    .row-2{grid-column:span 12}
    @media(min-width:700px){.row-2{grid-column:span 6}}
    .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px}
    button{background:transparent;color:var(--neon);border:1px solid var(--neon);padding:10px 14px;border-radius:999px;cursor:pointer;font-weight:600;text-transform:uppercase;letter-spacing:1px;box-shadow:0 0 8px rgba(0,255,106,.25)}
    button:hover{transform:translateY(-1px)}
    .grid{display:grid;gap:12px;grid-template-columns:repeat(12,1fr)}
    .drawer{grid-column:span 12;background:#0b1117;border:1px solid rgba(0,255,106,.25);border-radius:12px;padding:12px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .drawer .k{color:var(--muted);font-size:14px}
    .drawer .v{font-size:16px;word-break:break-all}
    @media(min-width:720px){.drawer{grid-column:span 6}}
    @media(min-width:1000px){.drawer{grid-column:span 4}}
    .error{margin-top:10px;padding:10px 12px;border-radius:10px;background:#2a0f12;border:1px solid #ff4d4d;color:#ffb3b3;display:none}
    footer{margin-top:auto;padding:24px 12px;text-align:center;color:var(--muted)}
    .badge{font-size:12px;padding:2px 8px;border:1px solid var(--neon);border-radius:999px;margin-left:8px}
    .mono{font-variant-ligatures:none}
    .copy{padding:6px 10px;border-radius:8px;border:1px dashed rgba(0,255,106,.35);font-size:12px}
  </style>
</head>
<body>
  <header>
    <h1>Subnetly <span id="cidrBadge" class="badge" title="Prefijo CIDR actual">/—</span></h1>
  </header>

  <main class="container">
    <section class="card">
      <h2>Entrada</h2>
      <div class="inputs">
        <div class="field row-2">
          <label for="ip">Address (admite /prefijo opcional)</label>
          <input id="ip" class="mono" placeholder="Ej: 192.168.1.10 o 192.168.1.10/24" autofocus>
          <div class="hint">Solo IPv4. Si no pones /prefijo aquí, usa la casilla de Netmask.</div>
        </div>
        <div class="field row-2">
          <label for="mask">Netmask (CIDR o puntual)</label>
          <input id="mask" class="mono" placeholder="Ej: /24 o 255.255.255.0">
          <div class="hint">Acepta formatos <strong>/n</strong> o <strong>a.b.c.d</strong>. Se ignora si el Address ya incluye /prefijo.</div>
        </div>
      </div>
      <div class="actions">
        <button id="btn-calc" type="button">Calcular</button>
        <button id="btn-clear" type="button" class="copy">Limpiar</button>
      </div>
      <div id="err" class="error"></div>
    </section>

    <section class="card">
      <h2>Resultados</h2>
      <div class="grid">
        <div class="drawer"><span class="k">Address</span><span id="out-address" class="v mono">—</span></div>
        <div class="drawer"><span class="k">Netmask</span><span id="out-netmask" class="v mono">—</span></div>
        <div class="drawer"><span class="k">Wildcard</span><span id="out-wildcard" class="v mono">—</span></div>
        <div class="drawer"><span class="k">Network</span><span id="out-network" class="v mono">—</span></div>
        <div class="drawer"><span class="k">HostMin</span><span id="out-hostmin" class="v mono">—</span></div>
        <div class="drawer"><span class="k">HostMax</span><span id="out-hostmax" class="v mono">—</span></div>
        <div class="drawer"><span class="k">Broadcast</span><span id="out-broadcast" class="v mono">—</span></div>
        <div class="drawer"><span class="k">Hosts/Net</span><span id="out-hosts" class="v mono">—</span></div>
      </div>
    </section>
  </main>

<!-- Created by Ciber-A -->
<footer>
  <span class="hack">> Created by <strong>Ciber-A</strong></span>
</footer>

<style>
.hack {
  font-family: "Courier New", monospace;
  color: #00ff6a;
  text-shadow: 0 0 10px #00ff6a;
}
.hack strong {
  color: #16ff94;
  animation: blink 1.2s infinite steps(2);
}
@keyframes blink {
  50% { opacity: 0.3; }
}
</style>
<!-- JavaScript -->
  <script>
  // ===== Utilidades IPv4 =====
  const isValidOctet = x => /^\d{1,3}$/.test(x) && +x>=0 && +x<=255;
  const ipToInt = ip => {
    const p = ip.split('.'); if(p.length!==4 || !p.every(isValidOctet)) return null;
    return p.reduce((a,v)=>(a<<8)|(+v&255),0)>>>0;
  };
  const intToIp = i => [(i>>>24)&255,(i>>>16)&255,(i>>>8)&255,i&255].join('.');
  const prefixToMask = n => { n=+n; if(!(n>=0&&n<=32)) return null; return (n===0?0:(0xFFFFFFFF<<(32-n))>>>0)>>>0; };
  const maskToPrefix = m => { let n=0,z=false; for(let i=31;i>=0;i--){const b=(m>>>i)&1; if(b){if(z) return null; n++;} else {z=true}} return n; };

  const parseMask = str => {
    if(!str) return null; str=str.trim();
    if(str.startsWith('/')){ const p=+str.slice(1); const mi=prefixToMask(p); if(mi==null) return null; return {maskInt:mi,prefix:p,maskStr:intToIp(mi)}; }
    if(/^\d+\.\d+\.\d+\.\d+$/.test(str)){ const mi=ipToInt(str); if(mi==null) return null; const p=maskToPrefix(mi); if(p==null) return null; return {maskInt:mi,prefix:p,maskStr:intToIp(mi)}; }
    return null;
  };

  const parseAddressAndPrefix = (addr, maskStr) => {
    if(!addr) return null;
    addr = addr.trim(); let base=addr, pfx=null;
    if(addr.includes('/')){ const [a,p]=addr.split('/'); base=a.trim(); if(!/^\d+$/.test(p)) return null; pfx=+p; }
    const ipInt = ipToInt(base); if(ipInt==null) return null;
    let maskInfo=null;
    if(pfx!=null){ const mi=prefixToMask(pfx); if(mi==null) return null; maskInfo={maskInt:mi,prefix:pfx,maskStr:intToIp(mi)}; }
    else { maskInfo=parseMask(maskStr||""); if(maskInfo==null) return null; }
    return { ipInt, ipStr:intToIp(ipInt), ...maskInfo };
  };

  const calcSubnet = (ipInt, maskInt, prefix) => {
    const wildcard=(~maskInt)>>>0, network=(ipInt & maskInt)>>>0, broadcast=(network | wildcard)>>>0;
    let usableHosts, hostMin, hostMax;
    if(prefix===32){ usableHosts=1; hostMin=ipInt; hostMax=ipInt; }
    else if(prefix===31){ usableHosts=2; hostMin=network; hostMax=broadcast; }
    else { const total=2**(32-prefix); usableHosts=total-2; hostMin=(network+1)>>>0; hostMax=(broadcast-1)>>>0; }
    return {wildcardStr:intToIp(wildcard),networkStr:intToIp(network),broadcastStr:intToIp(broadcast),
            hostMinStr:intToIp(hostMin),hostMaxStr:intToIp(hostMax),usableHosts};
  };

  // ===== UI =====
  const $ = s => document.querySelector(s);
  const ipEl = $('#ip'), maskEl = $('#mask'), errEl = $('#err'), cidrBadge = $('#cidrBadge');
  const out = {
    address: $('#out-address'), netmask: $('#out-netmask'), wildcard: $('#out-wildcard'),
    network: $('#out-network'), hostmin: $('#out-hostmin'), hostmax: $('#out-hostmax'),
    broadcast: $('#out-broadcast'), hosts: $('#out-hosts')
  };

  const showError = m => { errEl.textContent=m; errEl.style.display='block'; };
  const clearError = () => { errEl.style.display='none'; errEl.textContent=''; };
  const setResultsEmpty = () => { Object.values(out).forEach(e=>e.textContent='—'); cidrBadge.textContent='/—'; };

  function calculate(){
    clearError();
    const parsed = parseAddressAndPrefix(ipEl.value, maskEl.value);
    if(!parsed){ showError('Entrada inválida. Usa IPv4 y máscara /prefijo o puntual válida.'); setResultsEmpty(); return; }
    const { ipStr, maskStr, maskInt, prefix, ipInt } = parsed;
    const r = calcSubnet(ipInt, maskInt, prefix);
    out.address.textContent = ipStr + '/' + prefix;
    out.netmask.textContent = maskStr;
    out.wildcard.textContent = r.wildcardStr;
    out.network.textContent = r.networkStr + '/' + prefix;
    out.hostmin.textContent = r.hostMinStr;
    out.hostmax.textContent = r.hostMaxStr;
    out.broadcast.textContent = r.broadcastStr;
    out.hosts.textContent = r.usableHosts.toLocaleString('es-ES');
    cidrBadge.textContent = '/' + prefix;
  }

  document.getElementById('btn-calc').addEventListener('click', calculate);
  document.getElementById('btn-clear').addEventListener('click', ()=>{ ipEl.value=''; maskEl.value=''; clearError(); setResultsEmpty(); ipEl.focus(); });

  [ipEl, maskEl].forEach(el => el.addEventListener('keydown', e => { if(e.key==='Enter') calculate(); }));

  // Demo inicial

<!-- ipEl.value = '192.168.1.10/24'; maskEl.value = ''; calculate(); -->
  </script>
</body>
</html>
